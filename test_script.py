import re
import requests

# Define the target domain and input file paths
url = "lau.edu.lb"
subdomains_file = 'subdomains_dictionary.bat'
directories_file = 'dirs_dictionary.bat'
response = requests.get("https://" + url)
html = response.text

# Read the subdomains and directories from the input files
with open(subdomains_file, 'r') as f:
    subdomains = [line.strip() for line in f.readlines()]

with open(directories_file, 'r') as f:
    directories = [line.strip() for line in f.readlines()]

# Initialize the output lists
subdomains_output = []
directories_output = []
files_output = []

# Loop through all subdomains 
for subdomain in subdomains:
    suburl = 'https://'+subdomain+'.'+url
    print(suburl)
    try:
        response = requests.get(suburl)
    except:
        #if an exception was found while checking for the sub-domain, just move over to the next sub domain.
        continue

    # Check if the response is successful (status code 200-299)
    if response.status_code >= 200 and response.status_code < 300:
        subdomains_output.append(suburl)
        print("subdomain ",subdomain," succeeded stts code: ",response.status_code)